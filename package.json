{
  "name": "trenches",
  "version": "0.1.0",
  "private": true,
  "packageManager": "pnpm@9.6.0",
  "engines": {
    "node": ">=20"
  },
  "workspaces": [
    "packages/*",
    "services/*",
    "apps/*",
    "tools/*",
    "training/*"
  ],
  "scripts": {
    "clean": "rimraf \"**/dist\" \"**/*.tsbuildinfo\"",
    "typecheck": "tsc -b --pretty false",
    "build": "tsc -b",
    "lint": "eslint . --ext .ts",
    "test": "vitest run",
    "test:watch": "vitest",
    "dev": "pnpm -r --parallel run dev",
    "dev:core": "concurrently -k -r -c auto -n core,disc,safe,pol,exec,pos,ing,mig,price,lead,feat \"set DOTENV_CONFIG_PATH=..\\..\\.env && pnpm -F ./services/agent-core dev\" \"set DOTENV_CONFIG_PATH=..\\..\\.env && pnpm -F ./services/onchain-discovery dev\" \"set DOTENV_CONFIG_PATH=..\\..\\.env && pnpm -F ./services/safety-engine dev\" \"set DOTENV_CONFIG_PATH=..\\..\\.env && pnpm -F ./services/policy-engine dev\" \"set DOTENV_CONFIG_PATH=..\\..\\.env && pnpm -F ./services/executor dev\" \"set DOTENV_CONFIG_PATH=..\\..\\.env && pnpm -F ./services/position-manager dev\" \"set DOTENV_CONFIG_PATH=..\\..\\.env && pnpm -F ./services/social-ingestor dev\" \"set DOTENV_CONFIG_PATH=..\\..\\.env && pnpm -F ./services/migration-watcher dev\" \"set DOTENV_CONFIG_PATH=..\\..\\.env && pnpm -F ./services/price-updater dev\" \"set DOTENV_CONFIG_PATH=..\\..\\.env && pnpm -F ./services/leader-wallets dev\" \"set DOTENV_CONFIG_PATH=..\\..\\.env && pnpm -F ./services/features-job dev\"",
    "smoke": "tsx tools/smoke/sse-smoke.ts",
    "smoke:healthz": "tsx tools/smoke/healthz-smoke.ts",
    "smoke:sse": "tsx tools/smoke/sse-ping-smoke.ts",
    "smoke:exec": "tsx tools/smoke/execution-smoke.ts",
    "smoke:survival": "tsx tools/smoke/survival-smoke.ts",
    "smoke:sizing": "tsx tools/smoke/sizing-smoke.ts",
    "backtest": "tsx tools/backtest/src/cli.ts",
    "ope": "tsx tools/ope/src/ope.ts",
    "smoke:backtest": "pnpm backtest --from 2025-01-01 --to 2025-01-02",
    "smoke:ope": "pnpm ope --from 2025-01-01 --to 2025-01-02 --policy fee",
    "smoke:backtest:polish": "tsx tools/smoke/backtest-smoke.ts",
    "smoke:ope:both": "tsx tools/smoke/ope-smoke.ts",
    "smoke:creds": "tsx tools/smoke/creds-smoke.ts",
    "smoke:features-job": "tsx tools/smoke/features-job-smoke.ts",
    "smoke:pump-classifier": "tsx tools/smoke/pump-classifier-smoke.ts",
    "check:sse": "rg -n \"new EventSource\\(\" || true",
    "smoke:alpha": "tsx tools/smoke/alpha-smoke.ts",
    "smoke:fillnet": "tsx tools/smoke/fillnet-smoke.ts",
    "smoke:pnl": "tsx tools/smoke/pnl-smoke.ts",
    "smoke:migration-preset": "tsx tools/smoke/migration-preset-smoke.ts",
    "smoke:price-updater": "tsx tools/smoke/price-updater-smoke.ts",
    "smoke:ports": "tsx tools/smoke/ports-smoke.ts",
    "train:fillnet": "tsx training/fillnet/train.ts",
    "train:alpha": "tsx training/alpha_ranker/train.ts",
    "train:rugguard": "python training_py/rugguard_train.py",
    "smoke:route-quarantine": "tsx tools/smoke/route-quarantine-smoke.ts",
    "soak:summary": "tsx tools/soak/soak-summary.ts --db ${PERSISTENCE_SQLITE_PATH:-./data/trenches.db}",
    "lint:sse": "rg -n \"new EventSource\\(\" services || true",
    "smoke:leader-wallets": "tsx tools/smoke/leader-wallets-smoke.ts",
    "ci:build": "pnpm -r build",
    "lint:todo": "rg -n \"TODO|FIXME|XXX|NOTIMPL|NotImplemented\" -S || true",
    "ci:audit": "node tools/audit/run-ci-audit.js",
    "ci:check": "pnpm ci:build && pnpm lint:sse && pnpm lint:todo && pnpm ci:audit",
    "smoke:db": "tsx tools/smoke/db-smoke.ts",
    "smoke:lunar": "tsx tools/smoke/lunar-smoke.ts",
    "wallet:import": "PHANTOM_BASE58=%PHANTOM_BASE58% tsx tools/scripts/import-phantom.ts",
    "wallet:normalize": "tsx -r dotenv/config tools/scripts/normalize-wallet.ts",
    "smoke:create-conn": "tsx -r dotenv/config -r tsconfig-paths/register tools/smoke/create-conn-smoke.ts",
    "py:install": "cd training_py && python -m pip install -r requirements.txt",
    "train:fillnet:gpu": "python training_py/fillnet_train_xgb.py",
    "train:alpha:gpu": "python training_py/alpha_ranker_train_xgb.py",
    "train:survival": "python training_py/survival_train.py",
    "retrain:weekly:gpu": "pnpm train:fillnet:gpu && pnpm train:alpha:gpu && pnpm train:rugguard && pnpm train:survival",
    "promote:gate": "python training_py/promote_gpu.py",
    "retrain:weekly:all": "pnpm retrain:weekly:gpu && pnpm promote:gate"
  },
  "dependencies": {
    "bs58": "^5.0.0",
    "dotenv": "^16.4.5",
    "tweetnacl": "^1.0.3"
  },
  "devDependencies": {
    "@types/eventsource": "^1.1.11",
    "@types/node": "^20.12.7",
    "@types/ws": "^8.5.10",
    "@typescript-eslint/eslint-plugin": "^7.0.0",
    "@typescript-eslint/parser": "^7.0.0",
    "@vitest/coverage-v8": "^1.6.0",
    "concurrently": "^9.2.1",
    "eslint": "^8.57.0",
    "eslint-config-prettier": "^9.1.0",
    "eslint-plugin-import": "^2.29.1",
    "prettier": "^3.2.5",
    "rimraf": "^5.0.5",
    "ts-node": "^10.9.2",
    "tsconfig-paths": "^4.2.0",
    "tslib": "^2.6.2",
    "tsx": "^4.7.0",
    "typescript": "^5.4.5",
    "vitest": "^1.6.0"
  }
}
